大家好,非常感謝大家今天來到Project Tara的演講,我是主持人蘇怡安,我是主持人胡君偉,今天非常開心由傅群來為我們帶來一場演講,講題是從數據閱讀建築環境和能源,以臺灣能源數據為例。
等一下會由我這邊來稍微跟大家講解今天的進行流程,然後會由另外一位主持人胡君偉跟大家介紹今天的講者傅群。
首先,今天的演講是由Project Tara所舉辦的,我們等一下的演講過程將會全程錄影,換句話說,在演講完成之後,如果大家想要再重聽或分享給朋友,都可以在演講之後到Project Tara的網站上去看今天的錄影。
今天在講者介紹之後,以及在演講進行的過程當中,如果大家有什麼就是很即時的小問題,都歡迎隨時就是按raise hand的功能舉手,或者是在chat裡面就是提出您的問題,那主持人們都會隨時間就是monitor有沒有問題,然後會再跟講者說,那如果說你有比較比較大,然後比較複雜的問題,希望跟講者討論的話,那我們也會在演講的最後有開放的open的Q&A session,
也歡迎大家就是盡量踴躍不要客氣的提問。這大概是我們今天的演講流程,現在讓我們由另外一位主持人胡君偉來介紹今天的講者傅群。
大家好,傅群目前是新加坡國立大學NUS的PhD學生,目前於新加坡大學建築與都市數據科學實驗室中做研究,目前他所屬的研究是主要在處理建築相關的大數據應用,包含建築能源、室內環境舒適度跟建築IoT數據等等。
同時,他的實驗室也有在做一些社群的活動,例如在前年舉辦在知名數據平臺Kaggle的能源預測競賽,以及在開放式平臺課程EDS提供給大眾的數據科學課程。
有趣的是,在傅群在讀PhD之前,他在臺灣一家新創公司——探視空間Knowledge Analysis Based Exploration,擔任三年的數據科學家,致力於做建築相關大數據的研發,包含做一些異常的偵測、能源預測和數據視覺化等等的研究。
其中包含還有做臺積電的人工智慧服務開發跟臺北市政府的能源大數據分析。
所以今天傅群在研究方案上會致力於更多跟業界實務相關的題目。
所以今天的演講會提到能源預測的學術發展,最後也會分享怎麼樣配合開放數據實作做能源預測的服務。
讓我們歡迎傅群。
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
傅群議員
首先的話就是先讓大家感受一下一個能源
它的這個趨勢圖長什麼樣子
這個是一年的就是從2017年的一月到年底
那是從一個台灣的校園裡面拿到的實際的電表
那事先就想讓大家觀察一下
欸這個電表上有什麼特別的地方
首先我們可以先把
這邊局部放大
大家可以看到說欸
這個放大之後好像可以看到一些趨勢
因為它是每小時收的數據
所以你可以看到說
欸一天它其實就是一個
這樣子的profile
就是它是會有一個peak
就是大概在中午的時候
所以大家可以看到首先第一個pattern的話
其實就是weekly pattern
就是說它是一週一週的
那一到五它其實就是會有固定的
工作的pattern
就是中午很高然後晚上很低
但是到六日因為沒有人
這個peak也會稍微比較低一點
好我就用零光筆好了
雷射筆
ok
那
那下一個pattern就是有vocation
就是說欸像這邊
就是它跟一到五
本來就是都很低那是因為就是
Chinese New Year 新年
農曆新年發生的時候所以它能源比較低
那另外的話就是還有
seasonal trend就是說欸
暑假或是比較熱的天氣
的時候比較高然後在寒假的時候
或是說冬天的時候比較低
因為台灣是一個人氣為主的國家
所以然後我們大部分都沒有
暖氣所以在冬天的時候其實
能源是相對很省的
所以這就是
我們的第一個最簡單的
model也是一個比較經典的model
它是Lawrence Berkeley National Lab
提出的一個TOWT
model那TOW
代表就是Time Of Week
那其實就是說我們把
一個禮拜的第幾個小時
當成X週然後畫出來的話
它其實能源就365
天如果你把它打點在這張圖上面
你可以看到一到五它其實就是
很規律的
就是白天比較高然後
晚上的時候比較低這樣的狀況
所以我們會有幾個變數
第一個就是Time Of Week
第二個變數就是剛剛所說它跟外氣
的溫度其實會有關係
所以我們這邊有畫出來
就是說它們溫度跟能源
之間的相關
但是我們這邊也會特別區分說
它是occupy或unoccupy
就是說它這邊是有人還是沒有人
像是我們這邊可以看到夜間
我們就會把它定義為所謂的沒有人
那白天我們就會定義成
所謂的有人
所以通常這個切分其實會很rock
可能就是按照幾點上班幾點下班
然後這樣去切
那這樣切出來的結果就可以看到說
它的這個趨勢就是
很明顯
那occupy
它其實就是一個線性的模式
基本上它就是
跟常數項
會有一個常數項
再來就是跟溫度相關
那這邊溫度的回歸線
它是一個
分段去回歸的
因為其實它的
跟溫度上的相關的
如果把它打點畫出來的話
你會發現就是cooling它其實是相關的
之外
如果在一些寒帶國家
它其實當你的溫度越低的時候
它能源也會上升
那主要是heating的關係
所以
所以通常是
當然你可以用多項式的
就是可能二次方或三次方去beat
那再來就是
occupy的話就是沒有人的狀況下
那它就會偏向
只用溫度去回歸
它就是單一的
就是一次方的線性回歸
因為在夜間的話
通常會比較單純一點
那這就是回歸的結果
那其實
大致上它是可以抓到那個profile
只是說效果的時候
在一些細節處理上不是那麼好
但在實際上會有震盪
所以它R2大概就是不到0.6
那下一個就是比較傳統的
Physical Model Thermal Network
它基本上就是把建築結構成
就是有熱熔、熱足這樣
那就是說你外界的溫度
跟內部溫度的
這個梯度它的溫度差
就會造成說它的熱會
儲存在就是這個牆壁的壁體內
那或者是說它是
看就是說這牆壁它的厚度
或是它的材質
然後
決定說它多快的去傳入室內
所以通常外面的
例如說牆壁的表面溫度
跟室內的牆壁表面溫度
就是會有一個彈類
那另外就是說
室內的溫度差
其實也會相對比較平緩一點
所以在這個
條件下面我們其實會
把一棟建築去結構成
全部都是熱熔跟熱足
去組成的
那像是Roof我們可能就是
有三個熱足
兩個熱熔去組成
那這邊的外牆或是
Internal Mass它就有點像是
室內的家具或室內的內牆
整個建築你都可以用
這樣的方式去做
它的優點是它非常精準
但是缺點就是說你必須去決定
它到底有幾個熱熔熱足
那老實說這件事情不是非常簡單
那下一個的話
就是我們現在比較流行的
Machine Learning
這邊是用一個例子是LightGBM
這個Model
我們用這個Model來實做看看
那這個Model主要的好處
就是說它運算的速度很快
再來就是它的Tuning
相對簡單
所以我們通常就會用這個
像這個Model去做一些
比賽或是一些前期的測試
等等的用途
所以待會的Cargo Competition
大部分參賽者都是用這個Model去做的
那
這邊的Model它其實就是
我們除了剛剛所說的Time Week
它可能是一天裡面的第幾個小時
還有它是禮拜幾之外
還有就是Outdoor Air Temperature
還有就是其他IoT或是說
Meta或是說Lack Feature
這邊我們都其實可以放這個Model
它可以試的參數就會
比剛剛的線性Model更多
然後去捕捉一些
更細節的資訊
那
除此之外就是說
在我們剛剛所說的那麼多的
變數
比如說CO2或是說
Temperature
或是說它是Week A
它是禮拜幾或是它是第幾個小時
那這些變數之中
哪一些是最重要
那這Light GBM的Model可以告訴我們
在我們建模的過程中我們發現
發現是
24小時前的這個能源是最重要的
然後再來就是
外氣溫度等等
那它就可以告訴你說這些音質的重要性
那重要性相對低的
那或許你就可以把它拿掉
這樣
那當然就是說有些人會覺得
這邊Light GBM
就是說它的結果
那就會看到它的細節就會比剛才的
線性的模型來的好
它就比較少就是那些細節的震盪
這些
總算突破0.6這樣
那有些人會想說
就是說那Neural Network
是不是就是另外一個也是很流行的
方法那我們常常聽到深度學習
其中這種方法
那確實這個方法
就是在能源的預測上也是常用
像是LSTM或RNN這種
方式但是跟就是Tree Based
Model就是像剛才的Light GBM
或是說
XGBoost或是說
隨機森林這種方法來說
NN這種
方法它也是通常會需要
比較多的訓練時間然後
在Tune這個Model的時候也會
耗費很大的時間跟人力
所以在一個比較短期的
比賽或是說一個中期的
Project我們其實還是會
採用Tree Based Model像Light GBM這種
模型會相對比較迅速
然後比較有效率
那
我們就跳到
Coggle Computation
那我們就來看就是說這些
科學家數據科學家他們是
如何去預測
這些建築的人員
那首先
簡單介紹一下Coggle或許
有些人不太清楚
Coggle基本上現在就是一個Google下面的子公司
那主要就是
建立一個Online的Community
讓所有的數據科學家或是說
對機器學習有興趣的人或是學生
或是任何社會人士等等都可以
來這個平台去Share他們的想法
Share Data還有就是一起
參加比賽這樣
所以這個Coggle的
Platform其實就有三個部分
首先是Competition
就是他們上面就會有一些贊助商
那就是可能是公司
可能是學校他們就會出題目
提供獎金然後Coggle
協助他們辦比賽
那你可以看到這邊有些很有趣的比賽
像是Genstreet就是股票預測
然後Indoor Location就是用Wi-Fi
去預測現在人在哪邊
等等
再來就是Data Set
就是裡面的人又可以自由上傳
他們的Data Set
那像是COVID-19現在最流行的
就是疫苗相關的
發展啦或是說Netflix
然後還有就是Trump
這也是一個很有趣的研究題目
所以裡面的Data Set其實就是有包含專業的
或是說比較沒有那麼
嚴肅的其實都會在上面
所以是很有趣的一個平台
那最後我覺得最有趣的部分是
Notebook就是說其實它就是
就是大家會把它的程式碼
就扣在上面
有包含一些它如何做視覺化
或是說如何做Model的東西
它都會秀在上面
所以基本上你就是去
Copy它的Notebook你就可以重複
做它同樣做過的事情
那這個Notebook它其實也可以同時連結到
這個Computation跟Data Set
所以基本上你就可以直接用
它雲端提供的
支援它的CPU
它的GPU然後去跑
這個平台
上面有的Data Set
然後甚至用它的支援去參加
你的比賽甚至你根本不用
用你的Local端的用你的筆電
去跑這些模型你可以直接用雲端的支援
直接去上傳答案計算答案
好那介紹一下
就是這一個能源競賽到底在做什麼
那主要在
這個競賽裡面我們會有2000多個
電表那它是來自於
全世界不同國家的
1000多個建築
那我們想要找一個好的Algorithm
它是可以準確的預測
就是大部分建築的能源
那過去
其實大部分的
研究它可能就是說在某棟建築
它非常快某棟建築非常
準確然後非常容易
執行等等
如果說我們可以在這麼多建築
它是在跨不同國家
不同類型的話它會是一個
更General的方法而不是說它只是一個
單棟建築或是單一
國家的Case
所以這是這一個能源競賽的目的
去找一個最General
然後可以預測最準的方法
那
在這個Dataset裡面包含了一些
資料包含就是說
最基本的
Meter Reading
那這個主要就是
它電表的數值就是
它可能24小時
然後單年的資料
然後它的高低這樣
那另外就還有Building Meta
就是在什麼Site
然後它主要是什麼樣的
用途它可能是辦公建築
可能是學校建築
還有Square Feet它的樓地板面積等等
那還有就是說它也提供了氣象資料
可能它的溫度
濕度然後雲附量
等等
那在這個比賽裡面它會提供
2016年的Training Data
然後你要預測的是
2017年跟2018年的
能源數據這樣
那在這個競賽其實
比賽的方法其實就是你會先去
下載你的Dataset
就是你的Training Data
那包含就是裡面的電表數據啦
還有就是你的氣象數據
那接下來你就可以
訓練完你的模型你就可以
上傳你的答案
那上傳之後
它就會計算出一個分數
那你就可以看到我現在的分數
在第幾名然後在Leaderboard上面
那現在我們就來看一下
這個比賽的結果如何
首先的話很有趣的就是說
在程式語言應用方面大部分都是Python
那也是現在最流行的程式語言
是有一點點但就不是最多
那還有就是剛剛所說的
那大家都採用什麼樣的
繼續學習的模型
那在這個比賽裡面大部分還是用Gradient Boosting
主要就是因為這個數據它還是
比較屬於Tabular Data
就是它是比較屬於結構化
然後很像是那種Excel
那種表格的數據
那在Tree Based Model它們還是
最擅長解決這樣的問題
那在NN方面的話目前
在處理這樣的問題不是不行
而是說就是它訓練的時間太久
還有就是你需要Tune那個參數的時間
太長這樣
那再來的話就是有一些Tag
就可以發現其實
大部分的Notebook就是大家都會
提供像是EDA或是Beginner
就是這種比較偏視覺化
比較偏就是說
Data就是它的探索
就是它有哪些參數啦
然後它的Distribution
然後它的Time Series長什麼樣子
那
這邊我們就看一下
大部分Data Solution是長什麼樣子
那大家可以看到就是說
這邊的Rank是從
低到低
從第九名到兩千多名這樣
那可以看到大家分數上
可以從就是比較低到比較高
低的話代表這邊比較好
因為這邊的分數它其實就是
誤差所以越低越好
那可以看到策略上
其實大部分大家都會用
RO就是Remove All Liars
其實就是去清理資料
把這些All Liars剔除掉
然後Imputation就是去做一些
資料的補值這樣
就不是每個人都做
那在Feature Strategy
那在Holiday Feature
跟Categorical Statistical Feature
這個就看個人
好像也不是說很一致
那Feature大家用的數量也都
有的很多有的很少
那有些人就是沒有公佈這樣
那我覺得最有趣的就是Modeling Strategy
這邊可以看到
這邊後面的數字代表它模型的數量
那越高分的你會發現
它們越偏向用
很多的模型
主要就是在這種
數據的競賽裡面
其實你用單一模型
它的Performance通常是有限
但是如果你今天用不同的模型
例如說你用NN你用Line GBM
或是說你用不同的建模方法
你把這些建模的結果
全部都平均在一起
使用簡單的平均其實有時候
就可以得到很好的結果
可能就是0.5x第一個Model
0.5x第二個Model
它其實Performance可能就會比
個別的模型好所以這也是為什麼
它們會採用那麼多
模型然後去做平均
就是因為它可以
有效的去Improve你模型的表現
那這邊的話
我們再把前五名全部拿出來
再看一下它的內容
那其實最重要的就是說
其實它在Preprocess這邊
它其實很重要一點就是Remove
Anomalies或是Outliers這些
在這個競賽裡面它其實
Dynamism跟Outliers的狀況
非常多那其實這也不只
發生在這個競賽其實在大部分
真實世界的資料都是這樣就是
很多Dynamism很多Outliers你就要去清理
那你不做這件事情的話
可能會導致你的模型取到一些
比較奇怪的Pattern或是現象
那再來就是Features這邊
就是比較不一定大家用的有
10個也有28個那有些有Holiday
有些沒有Holiday那這就很看
大家怎麼去選擇
那在Modeling方面大家可以看到
大部分就是用Line GBM、XGBoost
這些就是比較屬於Tree Based的Model
那NN方面就是
相對比較少
那Post Process就是我剛才所說的
就是模型去做平均
它其實就是Ensembling
就是我今天做很多模型然後去做
把它結果做平均這樣
那這是一些
簡單它們提供的流程圖
像這是第一名它提供的流程圖
你就會看到它前面的Preprocess
就是做了剛剛所說的
一些Data Cleaning的事情
然後Feature Engineering
然後再來就是它做了很多模型
然後最後做Ensembling Prediction
把這些預設結果
做平均這樣
那其實每一個
比賽流程圖
都有一點像就是說
它們都會做一些Preprocessing
然後做一大堆的Model然後再去做Ensembling
那這個也是比較經典
的這種Machine Learning的Pipeline
就是從Preprocessing
Modeling
然後如果是Ensembling
這部的話就是比較偏比賽台
特別用啦
就是比較為了得到高分會使用的方法
那第三名也是
很類似的方法
那
因為這個競賽老實說
還是比較偏數據科學那部分
那
如果在場的聽眾對這個地方
有深度興趣的話
那可以去Check一些Details
在我們Publication
就是我們有為這個競賽
有做一個Review的Paper
那大家可以上去看一些這個比賽的細節
那如果你想要知道程式碼
那你也可以上去Github
去找他們已經公開出來的一些Model
或是一些細節
那另外的話就是說
我們甚至有他們的訪談影片
那大家可以
也可以從Github裡面去找一些YouTube的影片
怎麼介紹他們的Model
然後他們如何去進行這些事情
那主要今天講Cover的目的
就是也是給一些稍微對
能源預測稍微有點興趣
但又不是對這些機器學習模擬
太了解的人
就是一個簡單的Overview
就是這個比賽怎麼進行
然後裡面可能用到的是什麼Model
那接下來就是
我們會談到我們今天的
Project Study
就是我們想要做Low Prediction
那台灣的資料
那我們就想要問
那我們真的可以去做一個
能源預測的服務嗎
好那
我先把這個PowerPoint
先拉到旁邊
那
這就是我剛剛所說的
Cargo的平台
那大家如果去
Cargo.com就可以進來這邊
那他就是會有一堆競賽啊
一些Data啊Notebooks可以進去
那這邊的話
Project Tyra我這邊創建了四個Notebook
然後大家可以看一下
就是這個Notebook裡面就是有滿滿的
Python程式嘛那你就可以
直接去Copy然後你就可以
直接照著跑這樣
那這邊我就可以去
像是這邊我想要Copy
這一個我已經建好的Notebook
假設如果想要Copy然後你想要用
我Notebook你就可以用這邊的Copy and
Add to Notebook然後點下去
他就會創建一個新的
Copy在這邊
那這邊你可以看到說
他這個Notebook裡面他就會用到
他的雲端的資源
不過他現在在載入
那右邊這邊他就有一些Data Set
就是你這邊使用到的
那這邊Data Set
就是從Cargo Data Set裡面來的
那你就可以直接用
直接讀取到這一個Notebook裡面
那這邊可以看到有些CPU啊
RAM在這邊那你也可以甚至
開GPU那用他的雲端資源
去做一些運算
這樣所以在這個
Notebook裡面其實我們首先第一個
Notebook我們要做的是Download Data
就是我們想要去下載
Weather Data還有就是Energy Data
這些所以我們就
現場讓這個東西跑一下
我們就讓Run All他就會全部
都跑那
在這個同時我們也介紹一下
我們今天的Data Set有哪些
那首先是Energy Data
他是來自於
台電的數據
那其中包含了一些
每日的用電
的peak用電量就是說他的
尖端負載
就是一天最高的
能源他用到的是多少
那另外的話就是說
還有就是我們用電的
能源類別
因為我們台灣的能源類別非常多
有包含就是比較傳統的
一些燃氣
或是說燃煤核能這種
那也有一些像風力太陽能的
再生能源
那這些Data也都是台電現在有公佈
出來的
那
另外的話就是我知道有些聽眾
他可能對就是
一些比較Local的能源
比較有興趣像是一些
村或一些在什麼縣市
他們用電多少
那確實台電他在這部分
有一些數據
沒有cover在今天的
今天演講沒有cover這部分
那另外還有一些村裡的
就是他的經緯度
或是他的人口有多少
面積有多少那你也可以去
找一些像這邊這個網址
提供的開放資料
那還有就是如果你想要知道他的輪廓
那你也可以去找葫蘆測位中心
所開放的資料
那左邊這個就是一個很好的
Data Visualization
他是從一個陳大教授的FB
然後提供出來的一張圖
大家可以看到就是他有
把就是
村裡的面積還有就是能源就是
把他Mapping在一起然後看他的
能源密度怎麼樣
那我們可以先來看看這邊
跑出來抓到的能源數據長什麼樣子
首先的話是
氣象資料氣象資料的話
我們是從氣象局這邊拿到的
大家可以看到
抓兩年資料可以看到
其中一年就是他的
冬天比較低夏天比較高
台北台南
因為我們要預設的是全台灣的能源
所以我還是盡量就是Sample
北中南各一點
然後可能取平均
不是取平均我們是把
這三個點就當是他的Feature
去預設他的用點
那再來就是下載
就是從台電來的Energy Data
那裡面的數據其實非常多
除了剛剛所說的監控負載之外
還有就是來自於各種
發電來源的
數據這樣
那我們可以簡單看一下
他有包含工業用電
民生用電
工業用電的話例如說
你可以看到一整年
其實像是這邊
因為有Vacation Holiday
他其實用電量就會比較低
那當然就是在
像是這種禮拜六禮拜天他也會有一個
固定的Pattern
那這就是
剛剛所說的
近尖峰供電能力
就是說台電必須要
決定我當天需要提供
多少的用電
才可以去應付
當天最大的負荷量
那我們不可以讓這個最大負荷量超過這個供電
否則會出現超電
缺電的問題
那接下來還有就是
像風力太陽能的發電
像是太陽能就是
比較一般啦就是看你當天的
輻射量有多少
他就會提供多少量
夏天的話比較多冬天就比較少
那這個的話
Google Trend我們先回到
Dataset這邊介紹好了
大家可以看到WeatherData就是剛剛所說
你可以去用這個觀測資料
查詢去查詢
過去的歷史的
天氣的數據
然後去抓的平台
就是從這邊抓出來的
那還有就是鄉鎮的天氣預報
你可以從這個
氣象局提供的預報API
去抓你要的未來一週
然後每三小時的天氣預報
那比較有趣的就是Google Trend
Google Trend的話就是說
你可以去搜尋
某個關鍵字他在Google
上面的搜索量
例如說你就去查Google這個關鍵字
他被搜尋的量是多少
那你可以發現
我可以看到某個Pattern
禮拜
這邊的話其實就禮拜二
三四五那這邊就是禮拜六
禮拜天
你也可以就是說我今天是
看就是說以日為
單位的話你可以看到
一二三四五比較高六日比較低
那如果你從一二來看的話
你可以發現說
這是在美國所以他其實在
例如說新年的時候比較低
然後是不是在國定價值
比較低這樣
那
這個的話就是
也可以看到就是說如果我今天是用
台灣的數據為例這就是我們
剛剛最早在第一張投影片
提到就是在台大
台灣校園裡面的
用電量那如果你去比較
就是說像是Microsoft Excel
這邊的查詢量的話
你可以看到他其實可以對應到一些價值
像是新年啦
然後說一些清明節
中秋節或是說
雙十國慶
所以
也是一個很好去
跟就是國定價值
跟你使用量
不管是旅遊還是你銷售量
什麼去比對一個很好用的關鍵字
那這個的話也提到就是說
如果說像我們的
Power Meter如果我們把它去
做分類的話你可以
發現某一些建築它是比較
可能跟Education有關然後
有些建築它就可能跟辦公室比較
有關就可能跟Enterprise
不同關鍵字其實就是
可能它跟不同的人類的行為也有
關係所以這也是很有趣的一個
Open Data Set大家可以去網路
看那這邊我有提供過
Trender
怎麼去抓資料的程式
就可以看到
就是在新年的時候比較低
可能在一些國定價的時候比較低
可以看到例如說
10月10號好了
像這邊10月10號
11號12號13號
就是因為是國定價的所以這幾天也都比較低
那Holiday
Data的話其實就是
我們是從
一個網站叫TimeDate
那你可以上面去
找到各個國家的
Holiday那你只要去輸入
各個國家的名稱在它的網址上面
然後還有就是它的年份
那你就可以找到那個國家對應到的
國定價是這樣
那這也是很好用的一個
網站
所以我也抓好這些資料
OK
所以在這個Notebook裡面我們其實主要
做的事情就是我們去抓資料
所以這個Notebook最後我們可以
產生出來的東西就會像
是這樣就是我們會
Notebook上面會有
Output
就是在這邊就是我們可以去Output
Google Trends, CSV, Demand, CSV, Holiday
那你甚至可以從這邊
直接下載你要的資料
開口平台是蠻方便
你去儲存資料你去
創建Notebook
很好的地方
那再來的話就是
Pick Demand的Prediction Model
就是我們今天如果要預測
台灣的能源
那我們要去建一個模型
那這邊的話
我們就
我們目標其實就是
順時的尖峰負載
那其他其實當然也還有什麼民生用電工業用電
那我們就先不要cover那麼多
我們先以
比較簡單的順時尖峰負載來做預測
那這個是每天
都一筆資料就是一天當中
最高的能源負載是多少
那如果我們今天
只用最簡單的
可以來做預測的話
那就是說我們告訴他現在是禮拜一禮拜二
或是說禮拜六禮拜天的話
那首先我們可以先看一下
他的趨勢就是說0到4就是禮拜一到禮拜五
然後5.6就是六日
那1到5當然就比較高
然後6日就比較低這樣
很正常
所以如果我們按照這樣去做建模的話
其實他就會
好像是週而復始的一個
一個預測值這樣
所以就像藍色線
這個就是所謂的prediction
那其實非常不準
因為他就是只有
他是禮拜一級這個feature而已
那他的Oscar O只有0.1級
很糟糕
那所以我們第二個model
如果我們想要有一點季節性
我們加入氣象條件的話
我們這邊只加入溫度
那我們這邊的溫度
因為他是全台灣的
整體的能源預測
三個地區的temperature
台北台南台中
那你可以看到
就是說
如果我們對溫度
然後對能源
這樣去做那個打點
get a plot的話
你可以看到weekday他這邊有一個很明顯的curve
然後weekend這邊有一個很明顯的curve
那我們這邊是用二次方曲線
去畫出來
就可以看到這邊有很明顯的關係
所以
這邊我們加上去之後
那可以看到這邊prediction
他其實就準確很多
他大概就可以抓出這個季節性
然後他的Oscar可以達到0.81
抱歉我這邊忘記提到
就是說我們這邊的訓練資料是用
2019年全年的數據做訓練
然後用2020年
當成我們的test data
去看他準確性
所以可以看到即使我們只有
氣象條件只有禮拜一級
那我們預測未來一年的人員
其實也是還算準確的
那第三個模型就是說
除了就是說這邊的氣象條件
之外那我們可以看到這邊一些
像是holiday他這邊的預測就是
會有些問題他不太準
那主要就是因為模型他沒有辦法知道
哪一天是holiday
所以你必須給他這樣子的feature告訴他
所以這邊我們就是第三個模型就加了
holiday就是我們剛從
time and date上面抓到的holiday的
資料這樣
那
這邊的holiday type有幾種
0的話就是最一般的
1的話就是最一般的
普通天就是他們有holiday
然後0的話就是國定假日2的話就是weekend
可以看到他們分群的方法
也是不太一樣
那加了這個之後
你可以看到他在新年
這邊的預測好像會稍微比較低一點
那例如說在
10月10號左右他也會
這邊也會就是在這三天
他的預測值也會
對應的比較低
那就是因為有加入holiday的feature
所以從剛剛的R2的0.81進步到了
快要將近0.9
那最後其實最重要的就是說
我們的scope其實是
可以預測未來一週的能源
所以其實包含前一天
包含就是
前七天之類的這些
過去的能源數據
其實也可以是我們的feature
預測明天的能源
但如果我可以知道今天的能源
他的這個train長什麼樣子
那基本上我們就可以用今天的train
然後可能再加上一點點
如果溫度高我們就可以加一點
溫度低我們可以再稍微降低一點
然後去預測明天的能源
所以前一天或前七天的
這些能源數據
也是一個蠻好用的feature
那我這邊叫做lag feature
那這邊的話如果我們去
加上就是說
前一天然後前七天跟
兩個禮拜前的能源數據的話
可以看到就是說其實
他們相關性很高
就是說前一天跟
我們
我們現在的這個能源
他們的關係是非常密切
那前七天或是說
前十四天也都非常密切
那這也合理啦就是說
現在早上九點
跟昨天早上九點的能源很像
那就是說現在九點跟一個禮拜前的
九點也很像那也會跟
兩個禮拜前的九點也很像
所以加入這個feature之後
我們的Oscar可以
直接提升到0.94
那這個東西當然建議在於說
就是我今天要預測比較短期的
預測明天或是預測未來一個禮拜
的能源的話那我又可以用
這種前幾天的能源
當成我的feature
ok所以這邊的話
這個notebook主要就是做這個model
的training就是去
建立這個模型
那這個模型最後啦就是要輸出的時候
我們其實會用兩年資料去做訓練
只是剛才為了做一些validation
那我們就是可能前一年資料
先出來看一下效果如何
那如果我們確認這個模型的
參數沒問題然後效果都很好
那我們就可以用
拿到兩年資料然後去做訓練
所以我們最後這邊的output
其實就是一個
Live GBM的model
在我們這邊最後的一個
其實就是real time prediction
那我們就是用剛才
我們建好Live GBM的model
把它import進來
然後我們就可以用這個模型去
做預測
只是做預測之前我們還是要去抓一些
資料啦因為我們剛剛抓的都是
歷史資料那我們如果要預測
未來七天的能源的話
那我們就要去抓一下未來的
氣象預報
還有就是我們要去抓就是
holiday這些
那我們也要抓就是前幾天的
能源數據當成我們的feature
所以
這邊第一件事情就要script
一些
energy data
那這邊的話
可以看到就是我們會抓今年所有的
能源數據然後可以看到
就是說
這邊就是
一個月前的能源數據
那可以看到就是
然後到一月底的資料
那這邊也有就是
台電提供的他們的預估的
預測他們的
預測資料預測這個peak
裡面就長什麼樣子
那再來就是
我們會從中央氣象局這邊
去抓他的氣象預報
然後這邊我們接下來就可以去
做預測我們就可以預測
接下來七天的能源
那基本上就是用剛剛的Live GBM的model去做
那我們這邊可以抓氣象預報
數值台北台中台南
因為這個是在一個禮拜前我做的
notebook所以
他這邊的1月28到2月3號其實都是
預測的值
所以這邊台北台中台南
這邊都是氣象預報提供的
溫度
那
後面的話就是一些feature
就是像是禮拜幾然後還有
就是一天前還有七天前還有
14天前的能源那因為
只有第一天的話
有前一天的能源
所以這邊會有數值
那從第二天開始就會
沒有第一天的數據
所以我們的預測其實會從
第二天開始然後我們就
從第一天開始預測然後再預測第二天
第三天那前一天的
數據的話我們就會用前一天的預測值
去帶進去
所以我們可以看一下預測結果
預測結果的話其實可以看到
在這邊就是說
這邊的話就是
以直直搖局線的話就是過去發生的
那藍線跟綠線分別
是我們預測的LGBM model
那另外就是綠色線
就是台電預測的那可以看到
我們預測好像就是偏低這樣
所以我們可以去
預測一下就是我們可以事後去
評估一下那到底我們跟台電
預測的這個兩個
有什麼差異到底誰比較準還是說
兩個特性上有什麼不一樣
那因為這個是
可以看到
11天前預測所以我沒有對它
做任何的變動那我們可以
現在來反過來看一下我們預測的
結果如何
好的那
這是我們預測的結果
可以發現我們的橘色線
是
台電預測的
那藍色線就是我們LGBM
預測可以看到我們其實
一開始我們的誤差非常低
這些藍色的bar其實就是它的error
前三天幾乎很精準的
預測它的能源大概會是
怎麼樣但是
隨著時間越來越長其實越來越
不精準主要還是因為就是氣象
預報這件事情還是
很可能就是因為第一天第二天
第三天一直到越來越遠它的
氣象預報的準確度越來越差
那或者是說我今天帶入的溫度的
條件不夠多
所以它導致它的預測不是非常
準那台電
它的預測相對就比較平穩它
大概每天都可以維持在
就是一定的誤差量
我覺得非常厲害我不知道怎麼做到
然後另外它就是也是就是
它預測的誤差也大部分
偏正那我覺得偏苦不過這
只是七天的data
所以也不能就是簡單下這樣的
結論只能說就是從這七天大概可以
發現這個現象那
在預測準確度上面其實是不相上下
其實沒有差太多
好
那剛剛的notebook的link
我也放在這邊大家如果有興趣可以
上去kaggle去找或是你去搜尋
關鍵字pocket tyrant應該可以
找到我這些notebook
那前面我
應該沒有漏掉什麼對前面的話
就是一些open data set的介紹
那簡單說一下
今天的summary就是說
在建築的領域裡面
其實在能源預測的部分
它其實除了被就是外氣
條件被這些環境的
變數影響之外
那其實behavior也是很重要就是什麼時候
人是上班他幾點
上班甚至那天是假日還是
非假日或是週末其實都有
很大的影響
那第二點就是說我們其實從
kaggle competition就是能源預測
競賽裡面我們學到的事情
首先的話就是tree based model
它其實
是大部分winner
他們會使用的solution
那主要是因為它的performance還有就是
訓練時間還有tuning
parameter的時間上面可以達成一個平衡
就是我可以在
很有效率的狀況下
然後又可以達到不錯的performance
所以大家會採用這個方法
那另外就是說裡面的data scientist
就是主要就是主導
這個競賽我意思就是說
這些data scientist其實根本沒有什麼
能源或建築相關的background但是
憑著他們對於數據的技巧
上面社群的分享
大家彼此分享就是說
這些數據上有發現什麼發現
有什麼樣的特點
在這些知識上面
就是說這些data scientist
可以憑藉他們modeling的經驗
他們的knowhow去
做出最準確的預測
所以前面的優勝者其實都沒有什麼
建築相關的背景的專業人員
那再來就是
剛剛實作就是demand forecasting
model
就是台灣能源做實作的部分
那其實台灣open data
其實非常的足夠
去做這樣的model大概有兩年資料
但就我的感覺就是說其實兩三年
的數據就已經足夠
建構一個準確度還不錯的model
就以建築的
這個領域來說
那再來就是他的performance
也相當好就是大概可以到
0.9以上
而且他也很簡單可以去實作
在cargo platform就有免費支援
然後直接去做這件事情
那最後的話就是open data set
其實在台灣有非常豐富
還有非常多樣化的data set
相比像我在新加坡
其他的open data set量就是非常的有限
那台灣就非常多
當然裡面有很多很雜
可能不知道怎麼用的data set
但是其實裡面有一些很有用很有趣的
data set大家可以去玩
那另外的話就是說這些data set其實可以幫
像是我們這邊的researcher
去找到一些有趣的pattern
像是一般的excel
或是說google這樣的搜尋
其實也都可以協助你去
發現building energy裡面的一些細節
ok
那這就是我今天的演講
接下來大概會有10分鐘
開放大家Q&A的時間
我們感謝富群
今天帶來精彩的演講
就是對於
而且做得非常好
summary
在Cargo平台
上面的競賽還有一些
model介紹
LGBM還有那個
XGBoost
或neural network
等等還有建築預測的
整體的介紹跟open data science
那非常精彩
那現在我們看到
就在那個對話框
有朋友提問
說想請問一下
實際在使用的時候
可能沒有未來的準確
溫度預測
那這時候model的performance
會不會受到影響
其實會
但是以建築來說的話
應該這樣講
就是說你的溫度
它的差異可能就是說
就我們的觀察氣象預報
它裡面的溫度的誤差
我們先不談降雨量
降雨量預測是非常滿
但是溫度的它預測的誤差
是最多
那大部分的氣象預報都可以滿準確的去預測
它的溫度的profile
例如說可能18度到29度
它其實大概是滿準的
所以就這方面來說溫度不是太大的問題
然後再來就是建築的能源
它其實是滿穩定的一個profile
它其實不太會因為你溫度
突然升高或降低
就是會有很大的影響
所以就這方面來說
氣象預報雖然不是完全的準確
但是它對預測的
準確度不是有太大的影響
當然你說就是如果要預測未來一個月
或是下一個禮拜的
那可能預測的誤差會稍微
大一些些
但是如果你是預測明天一天
或是後三天的
那其實能源的準確度
我覺得是不會差太多
謝謝講者精闢的回答
那想要請問在場的聽眾
有沒有人有
就是問題想要請教
想要請教傅群呢
你可以直接mute詢問
或者是打開chat都可以
那你好我是Louis
我再追問一個問題
非常好的talk
那想問一下因為它這是一個time series的問題
那你們怎麼做validation
就是你有提到說
你們用2019的
然後在2020
那就是有沒有
就是有沒有更完整的validation的
做法之類的
那個主持人這邊補充一下
不好意思就是在傅群回答之前
想請那個有提問的
那個聽眾可以稍微介紹一下
自己的背景這樣子
就是大家可以比較有
互相的了解一下謝謝
對那我是
就像我在美國
然後我也是基本上也是data scientist
那只是我沒有
沒有怎麼特別做
time series的問題但是覺得還蠻有趣的
所以想學習一下
沒有問題
謝謝你的提問
那如果在time series的部分
大家會用的validation的方法
我不確定你說的validation是怎麼樣
但是如果是說我們要怎麼樣去切那個fold
就是說我們要怎麼樣去切那個資料去做
cross validation
例如說我們會切四分或五分
就是常見的切法
那如果在time series上面的話
我們會做shuffle
就是說我們不會去random就是說
可能一天我們就切成
就是隨機去找幾個小時
然後去做random的cross validation
我們會偏向就是說
我們例如說五年我們就是
前面四年當成training
然後最後一年當成validation
或是說我們選後面的四年
當training然後第一年當成
validation這樣
我們希望時間是連續的去取
去分段而不是說
讓它全部都洗在一起
然後去做random
然後去找出來裡面的
四分當training然後一分當validation
因為就是time series
這類的問題它還是
會有就是時間前後的
相關性所以你不能
就是隨機打算去做validation
這樣有回答到你的問題嗎
還是說你想要問的是其他部分
有有有大概
非常謝謝你的訪問
ok 謝謝
好精彩的討論喔
那想請問在場的聽眾
還有沒有就是什麼問題
想要跟複群就是
互相激盪的
嗨我是謝成
聽得見嗎
ok可以可以謝謝
ok嗨我之前在台大讀園藝
現在在美國讀生物資訊
那這個
我的問題是跟我想一下
假如你的這個模型
要投入實際應用的話
會有什麼資安的疑慮
比如說或許不用太嚴肅的資安
可能純粹就是有突發事件
比如說突然有一個
跟excel有關的梗圖在假日出現
那導致excel的搜尋量
在假日大增或是
類似的情況
要怎麼避免這種
意外狀況呢
其實會有常常會發生
這種事情那甚至說
氣象資料也很容易就突然就
壞掉啊就是數值可能
那確實會有
這種狀況那如果在應用到業界的話
其實你還是要去設一個
就是說今天如果
溫度他正常來說在
台灣可能就是零度到
40度之類那可能
out of range可能叫
這邊有錯誤那我可能
就會停止我這樣的服務
那就是可能告訴一些使用者說
現在服務停止了因為什麼樣的原因
然後現在必須要採用
比如說手動模式你不能用自動
所以這個確實就是
需要額外去加一些入去
避免這樣的狀況
因為在業界使用上如果你是
用這種low prediction去做
自動控制的話那確實
會有這樣的風險在沒有錯
酷
那我想再追問一個問題
是跟cargo有關
我前陣子有在研究然後
我看到像去年就有
跟呃我現在想知道
怎麼講反正去年就有看到兩個比賽
一個是小麥的那個
碎頭偵測然後另一個是
特殊病態的
這個影像偵測那其實
我也認識一些傳統育種家
他們收集了很多這種
影像資料然後他們的
品質可能不是那麼的
均一但是他們就選擇
那個可能他們就只能
放棄但是如果現在放到
cargo上面來讓這種
呃資料科學家社群
共同這個激盪的話感覺就會
有很棒的結果那我好奇的是
這種學術單位呃
要把資料放上去
然後讓所有人一起來
嗯就是找出
一個解法之後再
再來發表這個流程上
呃有沒有什麼要注意
的地方然後通常是怎麼達成的
吧嗯
在cargo這個competition因為我那時候
他好像是
前年的年底然後在準備
這個競賽那那時候我還
沒有進去
那個研究室裡面所以我沒有參與到這個部分
不過就我知道的他們其實
是會先做一些清理資料
就是我是說就是我們研究室因為
是我們是主辦方我們會先
先處理這些資料然後確定這些
資料的
quality大概都沒有問題
然後之後就會傳給cargo
他們團隊去解釋這些資料
那他們cargo他們也有一
一批就是很專業的data scientist
所以確認這些data的quality
大概ok然後也不會幫你清資料
因為data missing還有就是一些
outlier那個是參賽者要處理的
事情那他們自己
就會去看一下這些資料大概就是
哎規格ok然後再
就是他們也會內部再
試玩一下然後確認一下就是說
哎如果今天資料拿去做競賽
的話那我的training data有多少
validation data有多少
雖然我們在給他資料的時候我們建議
他是怎麼樣去切我們當初
好像是說我們現在兩年的training
然後一年當validation但是他們
強烈建議就是一年training
然後預測了兩年這樣
那他們有他們的
他們的基礎就是他們
認為要這樣那我們也是尊重這樣
然後他們有很多就是他們的
know how去舉辦這個競賽
那目前辦的cargo競賽大部分
爭議都不是太多所以我認為
cargo他們內部的team裡面
data scientist就是還是很強
那如果像是一些比較local像
台灣有其他的數據平台
競賽平台有時候他們爭議就蠻多
有時候那個競賽的品質就
比較差強人意但我也不能說
競賽平台的錯就是說那個就是
他們內部的專業人員
相對啦就是資源沒那麼多
沒有辦法聘請那麼大的團隊
去check這些比賽的細節
然後再加上國內的平台他們
也比較沒有去收費
就是說跟主辦方額外
收費那如果在cargo
我記得辦一次比賽可能要幾萬塊美金吧
就是他們會用他們團隊
去解釋資料然後直接去收費
所以那個獎金
就是這個
主辦方不只要提供獎金
要post一個比賽
還需要額外付一筆給
cargo這個平台
對對對所以確保就是說
這個比賽是有品質的
謝謝
nice talk
很感謝你的提問我覺得就是
我不排斥任何像是這種比較
cargo競賽端的或是說
你對open drc有什麼討論
我覺得什麼問題都可以提出來
我覺得都蠻有趣的
因為時間的因素
我們開放最後一個問題的提問
看看現場的
對在場的聽眾
有沒有什麼問題呢
如果沒有的話
我知道我們主持人的
其中一個是有最後一個問題
就是今天的ending的問題
那一樣就是不免俗
主持人
我是
我是
主持人
我跟講者
以前是台大神工系的同學
後來到台大機械系熱流組
做再生能源系統的研究
然後我現在在美國
做區域能源相關的研究
那今天的講題也非常有興趣
我有一個問題想要提問
就是關於
這個預測這個model
它可以對一些
能源的事件或者一些
比較社會上發展的事件
就是動態事件去做評估
例如說能源事件的話
就像是2016年2017年
有一個有815的全台大停電
那這個是
基本上是備轉容量過低
所造成的問題
那這個預測有沒有辦法
例如動態說什麼時候可以
發出一些警告
當你預測說接下來幾天
可能會有一些能源的事件造成
全台能源不變
或者說像最近的COVID-19
新冠肺炎的
這種社會狀況
那其實像有些很多國家
都是在家裡工作
那其實它能源使用上的行為
就會非常不一樣
那有沒有辦法
用一些比較特定的大事件
去做動態分析
那就是想問講者們的看法
OK
我覺得蠻酷的
那首先的話就是如果是用電的這種
例如說跳電預測
或是說停電預測
我覺得這個相對比較困難
第一個就是它是很少見的事件
所以那種少見的事件你可能
從過去到現在如果只發生
例如說十次
那其實就已經很難預測
因為工訓練的資料太少
那再來就是說你就算
發生的事件還算夠多
但接下來就是說你需要足夠的feature去描述
就例如說你需要電壓電流
或是我不是這方面的專家
所以可能還需要什麼頻率之類的
波形去detect
那這個部分的開放資料
目前我沒有主動去search
我也不知道有沒有這樣的開放資料
但是我知道COGGLE有類似的
預測題目所以或許
也可以去玩玩看
那再來就是說
COVID-19這個東西
就讓我想到最近有個競賽
其實是在IEEE他們
有個競賽就是專門在預測
COVID-19之後的能源
預測是長什麼樣子
所以
Electricity Demand Forecasting
Post-COVID
就是他想要知道就是說在COVID之後
那大部分能源會發生什麼樣的變化
那我會說就是這件事情
其實大部分應該會跟
嗯
能源的這種
behavior會相關
我自己有做過一件事情
就是說如果是用
Google關鍵字我今天可以簡單快速
讓大家看一下
如果是Google Trends的話
你可以這是我最近發現的事情
就是他跟Travel的關鍵字
還蠻相關的
例如說全球
然後我今天去找
旅遊好了
可以看到
其實他其實在
3月1號之內他就突然下降
可以看到前面他其實前面四年
其實都是蠻固定的
在夏天就是有個peak
但是在今年3月他就突然drop
所以
當然這只是說你剛好找了一個
relation相關correlation比較高
但是
是不是就是一個因果關係
這個可能要再去做更詳細的確認
但是這就是一個例子
就是說你可以從一些data裡面去找出
就是說
是不是有辦法從我們的model去預測
接下來就是在COVID發生之後
他能源的量會怎麼樣的變化
那這也是大家在關注的事情
但是
我不確定這件事情能不能做到
那就是說你可以去從
各種data set裡面去找出
可不可以去描述這件事情的feature
所以我覺得這是很酷的提問
感謝感謝
感謝感謝
謝謝蔣老師精彩的解釋
現在因為時間的關係
雖然我知道在場的各位
可能還有一些潛在的問題
不過
我們今天的演講
就到這邊告一個段落
讓我們再次感謝
非常精彩的演講
連我自己不是相關領域
都覺得好有趣喔
那如果大家未來有
對這個講題或對講者有興趣的話
也可以在project tiara上面
透過email
或者是附屬相關的
社群媒體
可以跟他做聯繫
那另外就是如果未來大家對於不同領域
然後不同
講者的不同講題
有任何興趣的話
就歡迎大家未來繼續參與我們project tiara的活動
那甚至呢也是可以報名參加
我們project tiara的演講的講者
那今天就非常非常謝謝大家的參與
那祝大家有個愉快的
一天或者是晚上
謝謝大家
謝謝
